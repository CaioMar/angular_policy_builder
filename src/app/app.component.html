<div style="display:flex;flex-direction:column;gap:12px">
  <div style="display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border-bottom:1px solid rgba(0,0,0,0.06);">
    <style>
      .has-submenu:hover .submenu { display: block !important; }
      /* File button and menu item styles */
      .file-button { padding:6px 10px;border:1px solid #ddd;border-radius:4px;background:#fff;display:flex;align-items:center;gap:6px; }
      .file-button .dots, .file-button .menu-icon { width:22px; height:22px; display:inline-flex; align-items:center; justify-content:center; color:#666; }
      .file-button .dots { font-size:22px; line-height:1; }
      .file-button .menu-icon svg { width:18px; height:18px; display:block; }
      .menu-item { padding:6px 8px; cursor:pointer; border-radius:4px; display:block; }
      .menu-item:hover, .menu-item.selected { background: #e8f4ff; color: #074fb0; font-weight:600; }
      .menu-item.disabled { color:#999; opacity:0.85; }
      .has-submenu.disabled { pointer-events: none; }
      .submenu .menu-item { white-space:nowrap }
    </style>
      <div style="display:flex;align-items:center;gap:12px">
        <div style="position:relative">
            <button class="file-button" (click)="fileMenuOpen = !fileMenuOpen" aria-label="File menu">
              <span class="menu-icon" aria-hidden="true">
                <!-- simple hamburger (three stacked bars) -->
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <rect x="3" y="6" width="18" height="2" rx="1" fill="currentColor" />
                  <rect x="3" y="11" width="18" height="2" rx="1" fill="currentColor" />
                  <rect x="3" y="16" width="18" height="2" rx="1" fill="currentColor" />
                </svg>
              </span>
            </button>
          <div *ngIf="fileMenuOpen" style="position:absolute;left:0;top:36px;background:white;border:1px solid #ddd;box-shadow:0 6px 18px rgba(0,0,0,0.08);z-index:500;padding:6px;border-radius:4px;min-width:180px">
              <div class="menu-item" (click)="newPolicy(); fileMenuOpen=false">New Policy</div>
              <div class="menu-item" (click)="save(); fileMenuOpen=false">Save</div>
            <div class="has-submenu" style="position:relative">
                <div class="menu-item has-arrow" (mouseenter)="fileMenuOpen=true" (click)="fileMenuOpen=false" style="display:flex;justify-content:space-between;align-items:center">
                  <span>Download</span>
                  <small style="color:#666">▸</small>
                </div>
                <!-- submenu shown on hover via CSS below -->
                <div class="submenu" style="display:none;position:absolute;left:100%;top:0;margin-left:6px;background:white;border:1px solid #ddd;box-shadow:0 6px 18px rgba(0,0,0,0.08);padding:6px;border-radius:4px;min-width:140px;">
                    <div class="menu-item" (click)="downloadDot(); fileMenuOpen=false">DOT (.dot)</div>
                    <div class="menu-item" (click)="downloadJson(); fileMenuOpen=false">JSON (.json)</div>
                </div>
            </div>
              <div class="has-submenu" style="position:relative">
                <div class="menu-item has-arrow" style="display:flex;justify-content:space-between;align-items:center">
                  <span>Import</span>
                  <small style="color:#666">▸</small>
                </div>
                <div class="submenu" style="display:none;position:absolute;left:100%;top:0;margin-left:6px;background:white;border:1px solid #ddd;box-shadow:0 6px 18px rgba(0,0,0,0.08);padding:6px;border-radius:4px;min-width:140px;">
                  <div class="menu-item disabled">DOT (.dot)</div>
                  <div class="menu-item disabled">JSON (.json)</div>
                </div>
              </div>
          </div>
        </div>
        <div style="font-weight:600">Policy Builder</div>
      </div>
    <div style="color:#666;font-size:13px">Use the editor to add nodes and edges. Select a node to edit properties.</div>
  </div>

  <div class="container" style="display:flex;gap:16px;align-items:flex-start">
    <div class="right-pane" style="flex:0 0 240px;">
      <h3 style="margin-top:8px">Info</h3>
      <p></p>
    </div>
    <div class="left-pane" style="flex:1;">
      <app-graph-editor #editor></app-graph-editor>
    </div>
  </div>
</div>

<!-- hidden file input used for import -->
<input #fileInput type="file" accept=".json,.dot" style="display:none" (change)="onFileSelected($event)" />
